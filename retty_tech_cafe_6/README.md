## Inside Android N

* Retty Tech Cafe#6


## Android N Developer Preview 5

* Developer Preview 5 includes near-final system images


## API Diff

## API Diff

* API Differences between 23 and 24
* https://developer.android.com/sdk/api_diff/24/changes.html
* https://developer.android.com/sdk/api_diff/24/changes/jdiff_statistics.html

## Good-bye android.test package

## Good-bye android.test package

* Deprecated in API level 24

## Good-bye android.test package

* ğŸ˜¡

## Good-bye android.test package

* https://developer.android.com/sdk/api_diff/24/changes/pkg_android.test.html
* https://developer.android.com/sdk/api_diff/24/changes/pkg_android.test.mock.html
* https://developer.android.com/sdk/api_diff/24/changes/pkg_android.test.suitebuilder.annotation.html


## Good-bye android.test packageğŸ”¥ğŸ”¥ğŸ”¥

* ç”Ÿãæ®‹ã‚Šã¯å°‘ã—ã ã‘ã„ã‚‹ğŸ˜Š
* Android Testing Support Libraryã«ã—ã‚ã£ã¦è©±
 * https://developer.android.com/topic/libraries/testing-support-library/index.html
* ã¡ãªã¿åƒ•ã¯æœ€è¿‘MockCursorä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰æ›¸ãã¾ã—ãŸğŸ˜¢
 * MockCursorã¯Deprecatedã§ãƒ¼ã™ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥

## android.provider

## android.provider.Settings.Global.BOOT_COUNT

* Settings.Global.BOOT_COUNT
 * èµ·å‹•ã—ãŸå›æ•°ã‚’å–å¾—ã§ãã‚‹
 * ã†ã‚“ã€ã§ï¼Ÿï¼Ÿ ãªAPI
 * https://developer.android.com/reference/android/provider/Settings.Global.html#BOOT_COUNT


## android.provider.Settings.ACTION_WEBVIEW_SETTINGS

* Settings.ACTION_WEBVIEW_SETTINGS
 * Allows user to select current webview implementation.
 * ä¾‹ãˆã°Chrome Stable,Beta,DevãŒå…¥ã£ã¦ãŸå ´åˆã€å®Ÿè£…ã‚’é¸ã¹ã‚‹ã£ã¦ã“ã¨ã¿ãŸã„
 * https://developer.android.com/reference/android/provider/Settings.html#ACTION_WEBVIEW_SETTINGS


## android.text.Html

* Html.toHtml method deprecated
* Html.fromHtml method deprecated
* https://developer.android.com/sdk/api_diff/24/changes/android.text.Html.html
* optionã‚’å¼•æ•°ã§è¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ä½¿ãˆã£ã¦ã“ã¨ã‚‰ã—ã„


## Key Developer Features

## Data Saver

* ã‚·ã‚¹ãƒ†ãƒ ãŒãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§è¡Œã‚ã‚Œã‚‹é€šä¿¡ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹
* ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã®ãƒ‡ãƒ¼ä½¿ç”¨ã‚’ãªã‚‹ã¹ãæŠ‘ãˆã‚‹
* ç‰¹å®šã®ã‚¢ãƒ—ãƒªã ã‘ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã«å…¥ã‚Œã¦é€šä¿¡ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’ã•ã›ãªã„ã“ã¨ã‚‚ã§ãã‚‹
* https://developer.android.com/preview/features/data-saver.html

## Data Saver

* Data Saverã®è¨­å®šå–å¾—ãƒ»å¤‰æ›´ç›£è¦–ã§ãã‚‹
* ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã¸ã®è¿½åŠ ã‚’è¦æ±‚ã§ãã‚‹
* å®Ÿè£…ç°¡å˜ã ã£ãŸ
* ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã®ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨é‡ã¯ãªã‚“ã‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã‚“ã æ„Ÿã˜é–‹ç™ºè€…ã«ä»»ã›ã¾ã™çš„ãªå‹¢ã„ã ã£ãŸ
 * è¦ã¯Data SaverãŒONã‹ã©ã†ã‹ç¢ºèªã—ã¦ã€ONãªã‚‰ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨é‡ã‚’æŠ‘ãˆã‚‹ åŠªåŠ› ã‚’ã—ã¦ã­ğŸ’ª
 * ãŠã„ã€é–‹ç™ºè€…ã®å–„æ„ã«å§”ã­ã‚‰ã‚Œã‚‹ã£ã¦ã“ã¨ã‹...


## Data Saver Sample

* https://github.com/operando/Data-Saver-Sample


## ã•ã¦ã€ã¤ã¤ã„ã¦ã¿ã‚‹ã‹

* Data Saverè¨­å®šç”»é¢ã«Intentã§é£›ã¹ã‚‹ã‹??
 * ä»Šã®ã¨ã“ã‚ã®æƒ…å ±ã˜ã‚ƒç„¡ç†ã£ã½ã„
 * Settingsã®Actionã¯ã‚‚ã¡ã‚ã‚“æä¾›ã•ã‚Œã¦ãªã„
 * ç”»é¢ãŒFragmentã ã—ç„¡ç†ãã†
 * com.android.settings.datausage.DataSaverSummary
* Data Saverã®ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆãŒã©ã“ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã®ã‹
  * netpolicy.xmlã‹ãªãƒ¼å¤šåˆ†
  * ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã‚‚shellã§å…¥ã£ã¦ã‚‚å…¨ç„¶FileãŒè¦‹ã‚Œãªã„ã®ã§å³ã—ã„...


## SQLite


## SQLite

* Android Nã«å…¥ã£ã¦ã‚‹SQLiteã®versionã‚’èª¿ã¹ã¦ã¿ãŸ
* å®Ÿã¯éƒ¨åˆ†çš„ã«AOSPã®ã‚³ãƒŸãƒƒãƒˆãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹


## AOSP changelog

* http://www.androidpolice.com/android_aosp_changelogs/android-m-preview-2-to-android-n-preview-1-AOSP-changelog.html
* http://www.androidpolice.com/android_aosp_changelogs/android-n-preview-1-to-android-n-preview-2-AOSP-changelog.html
* http://www.androidpolice.com/android_aosp_changelogs/android-n-preview-2-to-android-n-preview-3-AOSP-changelog.html
* http://www.androidpolice.com/android_aosp_changelogs/android-n-preview-3-to-android-n-preview-4-AOSP-changelog.html


## SQLite

* èª¿ã¹ã¦ã¿ãŸæ„Ÿã˜ SQLite 3.9.3 ã¿ãŸã„
* ã‚³ãƒŸãƒƒãƒˆ
 * https://android.googlesource.com/platform/external/sqlite/+/253ed64ded244ef3d8a7226efb812e7989bc8026


## SQLite 3.9.x

* json1 extension
* Full Text Search version 5 (FTS5)
* etc.

## SQLite 3.9.x

* æ®‹å¿µã§ã™...

## SQLite 3.9.x

* ä»Šç´¹ä»‹ã—ãŸæ©Ÿèƒ½ã¯Androidã®SQLiteã§ã¯ä½¿ãˆã¾ã›ã‚“

## SQLite 3.9.x

* ï¼¼(^o^)ï¼


## Why?

* ãã‚Œãã‚Œã®æ©Ÿèƒ½ã‚’ä½¿ã†ãŸã‚ã«flagã‚’enableã«ã—ãªã„ã¨ã„ã‘ãªã„
* ãªã‚‹ã»ã©...ã•ã‚Œã¦ãªã„...
* https://android.googlesource.com/platform/external/sqlite/+/master/dist/Android.mk#9


## ãƒ¯ãƒ³ãƒãƒ£ãƒ³ä¿ºã®è¦‹é–“é•ãˆã ã‚...

* Android Nã®SQLiteã§JSON1 Extensionè©¦ã—ã¦ã¿ãŸ
* https://github.com/operando/Try-Android-N-The-JSON1-Extension

## çµæœ

* ï¼¼(^o^)ï¼

## JSON1 Extensionã‚’æœ‰åŠ¹ã«ã—ãŸSQLiteã‚’buildã™ã‚‹

* JSON1 Extensionã‚’æœ‰åŠ¹ã«ã—ãŸSQLiteã‚’buildã™ã‚‹
* Not Android!!
* http://qiita.com/operandoOS/items/4dc7754a23ad5ab58615

## EasterEgg

* ã­ã“ã‚ã¤ã‚ homage EasterEggğŸ±

## ğŸ±

* ğŸ±

## Android N EasterEgg Neko Atsume Launcher

* Setting Tileé•·æŠ¼ã—ã ã‚‹ã„ğŸ±
* ã¯ã‚„ãã­ã“è¦‹ãŸã„ğŸ±ğŸ±

## Android N EasterEgg Neko Atsume Launcher

* https://github.com/operando/Neko-Atsume-Launcher


## Reddit ANA(Ask us Anything)

* Weâ€™re on the Android engineering team and built Android Nougat. Ask us Anything!
* https://www.reddit.com/r/androiddev/comments/4tm8i6/were_on_the_android_engineering_team_and_built/
* çµ‚ã‚ã£ã¦ã‚‹ã‘ã©...

## æ°—ã«ãªã£ãŸPost

* API 24 brought partial introduction of Java 8 types and methods. There are highly noticeable omissions from this addition such as java.time.* (JSR 310), java.lang.invoke.*, and convenience methods on String (like join). There also continues to be an absence of types and methods from Java 7 like java.nio.path.*.
As Android's standard library deviates further from properly mirroring the JDK, what are the views of the platform team with regard to these omissions? Are you concerned about the growing difficulty of the use and development of non-Android-specific libraries moving forward (whether they're pure-Java or want to target both the JVM and Android)?
* https://www.reddit.com/r/androiddev/comments/4tm8i6/were_on_the_android_engineering_team_and_built/d5ieg6r

## å›ç­”

* Anwar: We plan to support more of the Java 8 programming language spec in future releases. We have to prioritize what we spend our time on as we often have to optimize these implementations quite a bit for mobile, so these sometime roll out over multiple releases. In general, weâ€™re shortening the lag between platform support for new language spec.
